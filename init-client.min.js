window.solone=function(){function l(a,d){var e=document.createElement("script");e.title=a;e.type="text/javascript";e.textContent=d;document.head.appendChild(e);return e}function h(a,d){return new Promise(function(e,b){d=d||k;var g=new XMLHttpRequest;g.open("GET",a,!0);d&&Object.keys(d).forEach(function(a){g.setRequestHeader(a,d[a])});g.onreadystatechange=function(){4===g.readyState&&(200===g.status?e(g.responseText):b(Error(g.status)))};g.send()})}function m(a,d){return Promise.all([h(b.prefix+"/components/"+
a+"/"+a+".js",d),h(b.prefix+"/components/"+a+"/"+a+".html",d),h(b.prefix+"/components/"+a+"/"+a+".css",d)]).then(function(e,d,b){l(a,'__KaleoExtensions__.components["'+a+'"] \x3d (function(){\r\n'+e+"\r\n"+a+'.prototype.__extensionsHTML__ \x3d "'+d.replace(/[\r\n]/g,"").replace(/["]/g,"'")+'";\r\n'+a+'.prototype.__extensionsCSS__ \x3d "'+b.replace(/[\r\n]/g,"").replace(/["]/g,"'")+'";\r\nreturn '+a+";\r\n}());").setAttribute("env","dev");return __KaleoExtensions__.components[a]}).catch(function(){console.error("ERR! failed to fetch",
a,arguments)})}function n(a,d,e,c){return h(b.prefix+"/components/"+a+"/"+d+"/"+a+(e?"":".min")+".js",c).then(function(b){b=l(a,'__KaleoExtensions__.components["'+a+'"] \x3d (function(){\r\n'+b+"\r\nreturn "+a+";\r\n}());");b.setAttribute("env",d);e&&b.setAttribute("debug",e);return __KaleoExtensions__.components[a]}).catch(function(b){console.error("ERR! failed to fetch",a,b)})}function p(a,d,e,f){var g=g||{};return(new Promise(function(f,h){if(-1===q.concat(b.environments).indexOf(e))return h();
if(!c.authorization)return f();c.authorization({component:a,query:d,headers:g},f,h)})).then(function(){return __KaleoExtensions__.components[a]?__KaleoExtensions__.components[a]:c.useBackend?h(b.prefix+"/"+a+location.search,g).then(function(b){b=l(a,b);b.setAttribute("env",e);f&&b.setAttribute("debug",f);return __KaleoExtensions__.components[a]}):"dev"!==e&&e?n(a,e,f,g):m(a,g)}).catch(function(b){if(c.authorization)return c.onAuthFail(a,d);console.error("ERR! component fetch failed",a,e,f,b.stack)})}
function r(a){return a?(b.uriDecoder?b.uriDecoder(a):decodeURIComponent(a)).split(/[&]/g).reduce(function(a,b){b=b.split("\x3d");a[b[0]]=1===b.length?!0:b[1];return a},{}):{env:b.env||"dev"}}function f(a,b,c){return{value:a,writable:!!b,enumerable:!!c,configurable:!1}}function c(a){var d=r(location.search.replace("?","")),e=d.env||b.env||"dev",f=d.debug||b.debug||!1;c.authorization=__KaleoExtensions__.authentication;return p(a,d,e,f)}var b=__KaleoExtensions__.config,q=b.environments||["dev","prod"],
k={};__KaleoExtensions__.authentication||(__KaleoExtensions__.authentication=function(a,b){return b()});Object.defineProperties(c,{useBackend:f(!1,!0,!0),backendRouting:f(function(){c.useBackend=b.backendRouting=!0;return c}),authorization:f(void 0,!0,!0),auth:f(function(a){"function"===typeof a&&(c.authorization=__KaleoExtensions__.authentication=a);return c}),onAuthFail:f(function(){},!0,!0),setAuthFailListener:f(function(a){if(!a)return c.onAuthFail;c.onAuthFail="function"===typeof a?a:c.onAuthFail;
return c}),headers:f(function(a){if(!a)return k;k="object"===typeof a?a:k;return c}),prefix:f(function(a){if(!a)return b.prefix;b.prefix="string"===typeof a?a:b.prefix;return c}),config:f(function(){return b}),env:f(function(a){if(!a)return b.env;b.env="string"===typeof a?a:b.env;return c}),debug:f(function(a){if("undefined"===typeof a)return b.debug;b.debug=!!a;return c}),init:f(window.solone.init)});"function"===typeof define&&define.amd&&define("solone",function(){return c});"object"===typeof module&&
"object"===typeof module.exports&&(module.exports.solone=c);return c}();