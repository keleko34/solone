window.solone=function(){function m(a,d){var c=document.createElement("script");c.title=a;c.type="text/javascript";c.textContent=d;document.head.appendChild(c);return c}function k(a,d){return new Promise(function(c,b){d=d||n;var l=new XMLHttpRequest;l.open("GET",a,!0);d&&Object.keys(d).forEach(function(a){l.setRequestHeader(a,d[a])});l.onreadystatechange=function(){4===l.readyState&&(200===l.status?c(l.responseText):b(Error(l.status)))};l.send()})}function v(){return Promise.all([k("/node_modules/kaleo/config.js"),
k(g+h+"/config.js"),k(g+h+"/auth-client.js")]).then(function(a,d,c){var r=m("config_setup","");c=m("auth",c);r.textContent=a.replace("module.exports","\r\nvar node_config")+d.replace("module.exports","\r\nvar local_config");Object.keys(node_config).forEach(function(a){b[a]=node_config[a]});Object.keys(local_config).forEach(function(a){b[a]&&"object"===typeof b[a]?b[a].length?b[a].concat(local_config[a]):Object.keys(local_config[a]).forEach(function(c){b[a][c]=local_config[a][c]}):b[a]=local_config[a]});
e.authorization=__KaleoExtensions__.authorization;local_config=node_config=null;document.head.removeChild(r);document.head.removeChild(c);b.prefix&&(h=b.prefix);b.base&&(g=b.base);b.environments&&(p=p.concat(b.environments));b.uriDecoder&&(q=b.uriDecoder);b.backendRouting&&(e.useBackend=b.backendRouting);t=!0}).catch(function(){console.error("Failed to fetch configs",arguments)})}function w(a,d){return Promise.all([k(g+h+"/components/"+a+"/"+a+".js",d),k(g+h+"/components/"+a+"/"+a+".html",d),k(g+
h+"/components/"+a+"/"+a+".css",d)]).then(function(c,d,b){m(a,'__KaleoExtensions__.components["'+a+'"] \x3d (function(){\r\n'+c+"\r\n"+a+'.prototype.__extensionsHTML__ \x3d "'+d.replace(/[\r\n]/g,"").replace(/["]/g,"'")+'";\r\n'+a+'.prototype.__extensionsCSS__ \x3d "'+b.replace(/[\r\n]/g,"").replace(/["]/g,"'")+'";\r\nreturn '+a+";\r\n}());").setAttribute("env","dev");return __KaleoExtensions__.components[a]}).catch(function(){console.error("ERR! failed to fetch",a,arguments)})}function x(a,d,c,b){return k(g+
h+"/components/"+a+"/"+d+"/"+a+(c?"":".min")+".js",b).then(function(b){b=m(a,'__KaleoExtensions__.components["'+a+'"] \x3d (function(){\r\n'+b+"\r\nreturn "+a+";\r\n}());");b.setAttribute("env",d);c&&b.setAttribute("debug",c);return __KaleoExtensions__.components[a]}).catch(function(c){console.error("ERR! failed to fetch",a,c)})}function u(a,b,c,f){var d={};return(new Promise(function(f,g){if(-1===p.indexOf(c))return g();if(!e.authorization)return f();e.authorization({component:a,query:b,headers:d},
f,g)})).then(function(){return __KaleoExtensions__.components[a]?__KaleoExtensions__.components[a]:e.useBackend?k(g+h+"/"+a+location.search,d).then(function(b){b=m(a,b);b.setAttribute("env",c);f&&b.setAttribute("debug",f);return __KaleoExtensions__.components[a]}):"dev"!==c&&c?x(a,c,f,d):w(a,d)}).catch(function(d){if(e.authorization)return e.onAuthFail(a,b);console.error("ERR! component fetch failed",a,c,f,d.stack)})}function y(a){return a?(q?q(a):decodeURIComponent(a)).split(/[&]/g).reduce(function(a,
b){b=b.split("\x3d");a[b[0]]=1===b.length?!0:b[1];return a},{}):{env:b.env||"dev"}}function f(a,b,c){return{value:a,writable:!!b,enumerable:!!c,configurable:!1}}function e(a){var d=y(location.search.replace("?","")),c=d.env||b.env,e=d.debug||b.debug;return t?u(a,d,c,e):v().then(function(){return u(a,d,c,e)})}var h="",g="",p=["dev","prod"],q,n,b=__KaleoExtensions__.config,t=!1;Object.defineProperties(e,{useBackend:f(!1,!0,!0),backendRouting:f(function(){e.useBackend=!0;return e}),authorization:f(void 0,
!0,!0),auth:f(function(a){"function"===typeof a&&(e.authorization=a);return e}),onAuthFail:f(function(){},!0,!0),setAuthFailListener:f(function(a){if(!a)return __onAuthorizationFailed;__onAuthorizationFailed="function"===typeof a?a:__onAuthorizationFailed;return e}),headers:f(function(a){if(!a)return n;n="object"===typeof a?a:n;return e}),prefix:f(function(a){if(!a)return h;h="string"===typeof a?a:h;return e}),base:f(function(a){if(!a)return g;g="string"===typeof a?a:g;return e}),config:f(function(){return b})});
"function"===typeof define&&define.amd&&define("solone",function(){return e});"object"===typeof module&&"object"===typeof module.exports&&(module.exports.solone=e);return e}();